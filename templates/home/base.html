<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spinzo.in</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="/static/images/playesports.png" type="image/png">
    <meta name="theme-color" content="#000000">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Knewave&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<style>
    .knewave-regular {
        font-family: "Knewave", system-ui;
        font-weight: 400;
        font-style: normal;
    }

    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    .scrollbar-hide {
        -ms-overflow-style: none;
        /* for IE and Edge */
        scrollbar-width: none;
        /* for Firefox */
    }
</style>

<body class="bg-black text-white">
    <!-- Navbar -->
    <nav class="md:fixed mb-4 w-full top-0 left-0 z-20 backdrop-blur-lg bg-black bg-opacity-60" id="topNavBar">
        <div class="max-w-screen-xl mx-auto px-6 py-4 flex justify-between items-center">
            <a href="/home">
                <img class="w-18 h-14" src="{{settings.icon.url}}" alt="{{settings.siteName}}">
            </a>
            <div class="md:hidden">
                <a href="/contactus"
                    class="text-lg transition duration-200 sm:w-fit w-full px-3.5 py-2 bg-gradient-to-br from-[#22c235] via-[#5aee6c] to-[#b3f5cc] hover:from-[#5aee6c] hover:via-[#b3f5cc] hover:to-[#22c235] transition-all duration-700 ease-in-out rounded-lg shadow-[0px_1px_2px_0px_rgba(16,_24,_40,_0.05)] justify-center items-center flex hover:shadow-lg hover:scale-105">
                    <i data-feather="headphones" class="feather-icon mr-1 text-black"></i>
                    <span class="text-gray-900 text-sm font-medium leading-6 whitespace-nowrap neon-text">Contact
                        Us</span>
                </a>
            </div>
            <div class="hidden md:flex space-x-6">
                <a href="/home" class="text-lg text-green-500 transition duration-200">Home</a>
                <a href="/aboutus/" class="text-lg text-green-500 transition duration-200">About</a>
                <a href="/services/" class="text-lg text-green-500 transition duration-200">Services</a>
                <a href="/contactus"
                    class="text-lg transition duration-200 sm:w-fit w-full px-3.5 py-2 bg-gradient-to-br from-[#22c235] via-[#5aee6c] to-[#b3f5cc] hover:from-[#5aee6c] hover:via-[#b3f5cc] hover:to-[#22c235] transition-all duration-700 ease-in-out rounded-lg shadow-[0px_1px_2px_0px_rgba(16,_24,_40,_0.05)] justify-center items-center flex hover:shadow-lg hover:scale-105">
                    <i data-feather="headphones" class="feather-icon mr-1 text-black"></i>
                    <span class="text-gray-900 text-sm font-medium leading-6 whitespace-nowrap neon-text">Contact
                        Us</span>
                </a>
            </div>
        </div>
    </nav>
    {% block body %}
    {% endblock body %}


    {% if messages %}
    <div class="fixed bottom-4 right-4 space-y-4 z-50">
        {% for message in messages %}
        {% if message.tags == 'success' %}
        <div class="bg-green-500 py-2 px-4 rounded-md text-white text-center flex gap-4 items-center">
            <p>{{ message }}</p>
            <span class="cursor-pointer font-bold" onclick="this.parentNode.remove()"><sup>X</sup></span>
        </div>
        {% elif message.tags == 'error' %}
        <div class="bg-red-500 py-2 px-4 rounded-md text-white text-center flex gap-4 items-center">
            <p>{{ message }}</p>
            <span class="cursor-pointer font-bold" onclick="this.parentNode.remove()"><sup>X</sup></span>
        </div>
        {% elif message.tags == 'warning' %}
        <div class="bg-yellow-500 py-2 px-4 rounded-md text-white text-center flex gap-4 items-center">
            <p>{{ message }}</p>
            <span class="cursor-pointer font-bold" onclick="this.parentNode.remove()"><sup>X</sup></span>
        </div>
        {% elif message.tags == 'info' %}
        <div class="bg-blue-500 py-2 px-4 rounded-md text-white text-center flex gap-4 items-center">
            <p>{{ message }}</p>
            <span class="cursor-pointer font-bold" onclick="this.parentNode.remove()"><sup>X</sup></span>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    {% endif %}

    
    <div class="fixed bottom-0 left-0 right-0 z-40 bg-gradient-to-br from-[#22c235] via-[#5aee6c] to-[#43d963] transition-all duration-700 ease-in-out rounded-t-3xl shadow-[0px_1px_2px_0px_rgba(16,_24,_40,_0.05)] justify-center items-center flex md:hidden">
        <nav class="flex justify-between w-full max-w-sm px-4 py-3">
            <!-- Home -->
            <a href="/home" class="flex flex-col items-center text-black">
                <i data-feather="home" class="w-6 h-6"></i>
                <span class="text-xs mt-1">Home</span>
            </a>
            <!-- Activity -->
            <a href="/activity" class="flex flex-col items-center text-black">
                <i data-feather="clock" class="w-6 h-6"></i>
                <span class="text-xs mt-1">Activity</span>
            </a>
            <!-- Promotion -->
            <a href="/promotion" class="flex flex-col items-center text-black">
                <i data-feather="gift" class="w-6 h-6"></i>
                <span class="text-xs mt-1">Promotion</span>
            </a>
            <!-- Wallet -->
            <a href="/wallet" class="flex flex-col items-center text-black">
                <i data-feather="credit-card" class="w-6 h-6"></i>
                <span class="text-xs mt-1">Wallet</span>
            </a>
            <!-- Account -->
            <a href="/my-account" class="flex flex-col items-center text-black">
                <i data-feather="user" class="w-6 h-6"></i>
                <span class="text-xs mt-1">Account</span>
            </a>
        </nav>
    </div>
    <div class="mb-24"></div>
    <input type="hidden" name="csrfmiddlewaretoken"
        value="hgU5WM4dC1EOjLkmgy8uZpDAnXpQWZACMtUPeyGFNzsJL96dLnMBNHu16Nnory0r">
    <script>
        feather.replace();
    </script>
    <script>
        function validatenumber() {
            var phoneNumber = document.getElementById('phone_number').value;

            // Regex to check if the phone number is 10 digits long
            var phoneRegex = /^[0-9]{10}$/;

            // Check if the number matches the regex
            if (!phoneRegex.test(phoneNumber)) {
                alert("Please enter a valid 10-digit mobile number.");
                return false;  // Prevent form submission if validation fails
            }

            // If validation passes, submit the form
            document.getElementById('phoneNumberForm').submit();
        }

        document.addEventListener('DOMContentLoaded', function () {
            // Fetch the user's IP address using ipify
            fetch('https://api64.ipify.org?format=json')
                .then(response => response.json())
                .then(ipData => {
                    const ip = ipData.ip;
                    console.log('User IP:', ip);

                    // Fetch the location data based on the user's IP using ipwhois
                    fetch(`https://ipwhois.app/json/${ip}`)
                        .then(response => response.json())
                        .then(locationData => {
                            const region = locationData.region;
                            const city = locationData.city;
                            const country = locationData.country;
                            const lat = locationData.latitude;
                            const lon = locationData.longitude;
                            const timezone = locationData.timezone;
                            const isp = locationData.isp;

                            // Send the data to Django backend via AJAX to update the user model
                            fetch('/update-user-location/', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                                },
                                body: JSON.stringify({
                                    region_name: region,
                                    city: city,
                                    zip_code: country,  // Use country as zip code, you can adjust this logic
                                    lat: lat,
                                    lon: lon,
                                    timezone: timezone,
                                    isp: isp,
                                }),
                            })
                                .then(response => response.json())
                                .then(data => {
                                    console.log('User data updated:', data);
                                })
                                .catch(error => console.error('Error updating user data:', error));
                        })
                        .catch(error => console.error('Error fetching location info:', error));
                })
                .catch(error => console.error('Error fetching IP info:', error));
        });
    </script>

</body>

</html>